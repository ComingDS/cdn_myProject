import{k as P,l as L,y as K,r as x,o as r,n as c,p as s,z as u,q as w,A as v,F as V,B as E,c as O,w as b,x as q,s as o,u as G,j as U,C as X,D as J,m as W}from"./vendor.4c86ec42.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import{s as j}from"./index.66d07b07.js";var H="https://cdn.jsdelivr.net/gh/ComingDS/cdn_myProject/assets/\u5FAE\u4FE1\u56FE\u7247_20220323143935.11d82118.png";const Y={class:"answerTitle"},Z={class:"question_name"},ee={key:0,class:"imgs"},te={key:0,class:"question"},ne={key:1},ae={key:1,class:"question"},se={key:1},le={key:2,class:"question"},oe=q("\u662F"),re=q("\u5426"),ie={key:0},ue={key:3,class:"question"},ce={key:4,class:"question"},de={props:{nameData:Object,dataIndex:Number},emits:["getData"],setup(i,{emit:n}){const t=i,d=P(),_=L({radio:"",checkList:[],judge:"",input:[],desc:"",options:""}),a=m=>{const p=Object.keys(m).filter(g=>{if(m.question_type==="1"||m.question_type==="2"||m.question_type==="3")return g.indexOf("option")!==-1;if(m.question_type==="4")return g.indexOf("option")!==-1&&m[g];if(m.question_type==="5")return g.indexOf("option")!==-1}),h=JSON.parse(JSON.stringify(p));return p.forEach(g=>{m[g]===null&&h.splice(h.indexOf(g),1)}),h};K(()=>{n("getData",{dataIndex:t.dataIndex,info:_})});const F=m=>{z(m.target)},z=m=>{let p=m.requestFullScreen||m.webkitRequestFullScreen||m.mozRequestFullScreen||m.msRequestFullScreen;if(p)p.call(m);else if(typeof window.ActiveXObject!="undefined"){let h=new ActiveXObject("WScript.Shell");h!==null&&h.SendKeys("{F11}")}};return(m,p)=>{const h=x("el-image"),g=x("el-radio"),C=x("el-radio-group"),A=x("el-checkbox"),M=x("el-checkbox-group"),R=x("el-input");return r(),c("div",Y,[s("div",Z,[s("p",null,[s("span",null,u(t.dataIndex+1)+".",1),s("span",null,u(t.nameData.question_type==="1"?"(\u5355\u9009)":""),1),s("span",null,u(t.nameData.question_type==="2"?"(\u591A\u9009)":""),1),s("span",null,u(t.nameData.question_type==="3"?"(\u5224\u65AD)":""),1),s("span",null,u(t.nameData.question_type==="4"?"(\u586B\u7A7A)":""),1),s("span",null,u(t.nameData.question_type==="5"?"(\u7B80\u7B54)":""),1),s("span",null,u(t.nameData.question_name)+"------\uFF08"+u(t.nameData.question_score)+"\u5206\uFF09",1)]),t.nameData.question_image&&t.nameData.question_image!==""?(r(),c("p",ee,[w(h,{onClick:F,src:`http://192.168.5.104:5008${t.nameData.question_image}`,lazy:""},null,8,["src"])])):v("",!0)]),t.nameData.question_type==="1"?(r(),c("div",te,[(r(!0),c(V,null,E(a(t.nameData),(e,l)=>(r(),c("div",{key:l},[e==="option"+(l+1)?(r(),O(C,{key:0,modelValue:o(d).state.examQue[t.dataIndex].answer,"onUpdate:modelValue":p[0]||(p[0]=f=>o(d).state.examQue[t.dataIndex].answer=f)},{default:b(()=>[w(g,{class:"elRadio",label:t.nameData[e]},{default:b(()=>[q(u(t.nameData[e]),1)]),_:2},1032,["label"])]),_:2},1032,["modelValue"])):v("",!0),e==="option"+(l+1)&&t.nameData[e+"_image"]?(r(),c("p",ne,[w(h,{src:`http://192.168.5.104:5008${t.nameData[e+"_image"]}`,lazy:""},null,8,["src"])])):v("",!0)]))),128))])):v("",!0),t.nameData.question_type==="2"?(r(),c("div",ae,[(r(!0),c(V,null,E(a(t.nameData),(e,l)=>(r(),c("div",{key:l},[e==="option"+(l+1)?(r(),O(M,{key:0,modelValue:o(d).state.examQue[t.dataIndex].answer,"onUpdate:modelValue":p[1]||(p[1]=f=>o(d).state.examQue[t.dataIndex].answer=f)},{default:b(()=>[w(A,{label:t.nameData[e],value:t.nameData[e]},null,8,["label","value"])]),_:2},1032,["modelValue"])):v("",!0),e==="option"+(l+1)&&t.nameData[e+"_image"]?(r(),c("p",se,[w(h,{src:`http://192.168.5.104:5008${t.nameData[e+"_image"]}`,lazy:""},null,8,["src"])])):v("",!0)]))),128))])):v("",!0),t.nameData.question_type==="3"?(r(),c("div",le,[w(C,{modelValue:o(d).state.examQue[t.dataIndex].answer,"onUpdate:modelValue":p[2]||(p[2]=e=>o(d).state.examQue[t.dataIndex].answer=e)},{default:b(()=>[w(g,{label:"\u662F",size:"large"},{default:b(()=>[oe]),_:1}),w(g,{label:"\u5426",size:"large"},{default:b(()=>[re]),_:1})]),_:1},8,["modelValue"]),(r(!0),c(V,null,E(a(t.nameData),(e,l)=>(r(),c("div",{key:l},[e==="option"+(l+1)&&t.nameData[e+"_image"]?(r(),c("p",ie,[w(h,{src:`http://192.168.5.104:5008${t.nameData[e+"_image"]}`,lazy:""},null,8,["src"])])):v("",!0)]))),128))])):v("",!0),t.nameData.question_type==="4"?(r(),c("div",ue,[(r(!0),c(V,null,E(a(t.nameData),(e,l)=>(r(),c("div",{class:"fillIn",key:l},[s("p",null,"\u586B\u7A7A"+u(l+1),1),w(R,{class:"el_inp",modelValue:o(d).state.examQue[t.dataIndex].answer[l],"onUpdate:modelValue":f=>o(d).state.examQue[t.dataIndex].answer[l]=f,placeholder:"\u8F93\u5165\u4F60\u7684\u7B54\u6848"},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):v("",!0),t.nameData.question_type==="5"?(r(),c("div",ce,[w(R,{modelValue:o(d).state.examQue[t.dataIndex].answer,"onUpdate:modelValue":p[3]||(p[3]=e=>o(d).state.examQue[t.dataIndex].answer=e),resize:"none",type:"textarea",rows:"10",cols:"5"},null,8,["modelValue"])])):v("",!0)])}}};var me=T(de,[["__scopeId","data-v-c0c02144"]]);const Q=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],D=(()=>{const i=Q[0],n={};for(const t of Q)if((t==null?void 0:t[1])in document){for(const[_,a]of t.entries())n[i[_]]=a;return n}return!1})(),N={change:D.fullscreenchange,error:D.fullscreenerror};let y={request(i=document.documentElement,n){return new Promise((t,d)=>{const _=()=>{y.off("change",_),t()};y.on("change",_);const a=i[D.requestFullscreen](n);a instanceof Promise&&a.then(_).catch(d)})},exit(){return new Promise((i,n)=>{if(!y.isFullscreen){i();return}const t=()=>{y.off("change",t),i()};y.on("change",t);const d=document[D.exitFullscreen]();d instanceof Promise&&d.then(t).catch(n)})},toggle(i,n){return y.isFullscreen?y.exit():y.request(i,n)},onchange(i){y.on("change",i)},onerror(i){y.on("error",i)},on(i,n){const t=N[i];t&&document.addEventListener(t,n,!1)},off(i,n){const t=N[i];t&&document.removeEventListener(t,n,!1)},raw:D};Object.defineProperties(y,{isFullscreen:{get:()=>Boolean(document[D.fullscreenElement])},element:{enumerable:!0,get:()=>{var i;return(i=document[D.fullscreenElement])!=null?i:void 0}},isEnabled:{enumerable:!0,get:()=>Boolean(document[D.fullscreenEnabled])}});D||(y={isEnabled:!1});const fe={class:"countdown"},_e={id:"mss"},pe={class:"time"},ge=q(" \u5012\u8BA1\u65F6\uFF1A"),we={class:"el_btn"},he=q("\u63D0\u4EA4"),ye={class:"answer"},ve={class:"exhibit"},be={class:"answer_title"},xe={class:"title"},De={class:"exam_name"},ke={class:"stage"},qe={class:"dialog-footer"},Fe=q("\u786E\u5B9A"),Se={setup(i){const n=P(),t=G(),d=U();let _=X(null),a=L({personInfo:"",questionName:[],overallResult:"",count:0,setTimer:"",answers:[],dialogVisible:!1,difference:"",time:"",timer:null,min:"",sec:"",t:""});const F=async()=>{(await j({id:n.state.answerGetData[0].id,person:a.personInfo,answer:n.state.examQue})).code==="1001"&&(localStorage.removeItem("studentInfo"),localStorage.removeItem("saveInfo"),a.timer=null,d.push("/submitPage"))},z=e=>{let l={id:e.dataIndex,result:""};for(let f in e.info)(e.info[f]!==""||typeof e.info[f]=="object"||e.info[f].length!==0)&&(l.result=e.info[f]);if(l.result!==""||l.result.length!==0){const f=a.answers.find(S=>S.id===l.id);f?Object.assign(f,l):a.answers.push(l)}};J(()=>{const{examLink:e}=t.params;n.dispatch("getData",e),n.dispatch("getExamQue")});const m=()=>{let e=0;return n.state.examQue.forEach(l=>{e+=l.question_score}),e};W(()=>{a.overallResult=m(),a.personInfo=JSON.parse(localStorage.getItem("studentInfo"));let e=n.state.answerGetData[0].duration.split(":");console.log(e[0]*60*60+e[1]*60+e[2]),a.difference=new Date(new Date(a.personInfo.time).getTime()+1e3*(e[0]*60*60+e[1]*60+e[2]*1)),console.log(new Date(a.personInfo.time).toLocaleString(),e[1]*60,new Date(a.difference).toLocaleString()),window.addEventListener("focus",A),window.addEventListener("blur",C),window.addEventListener("keydown",h),window.addEventListener("load",p),R()});const p=()=>{if(window.ActiveXObject){var e=new ActiveXObject("WScript.Shell");e.SendKeys("{F11}")}else _.value.requestFullScreen?_.value.requestFullScreen():_.value.msRequestFullscreen?_.value.msRequestFullscreen():_.value.webkitRequestFullScreen?_.value.webkitRequestFullScreen():_.value.mozRequestFullScreen&&_.value.mozRequestFullScreen()},h=e=>{if(console.log(e.keyCode),window.event.altKey&&(window.event.keyCode===37||window.event.keyCode===39)){n.commit("setDialogVisible",!0),n.commit("fnAdd");return}if(e.keyCode==116||e.keyCode==112||e.ctrlKey&&e.keyCode==82){n.commit("setDialogVisible",!1);return}if(e.ctrlKey&&e.keyCode===78){n.commit("setDialogVisible",!0),n.commit("fnAdd");return}if(e.shiftKey&&e.keyCode===121){n.commit("setDialogVisible",!0),n.commit("fnAdd");return}if(window.event.srcElement.tagName==="A"&&window.event.shiftKey){n.commit("setDialogVisible",!0),n.commit("fnAdd");return}if(window.event.altKey&&window.event.keyCode===115){window.showModelessDialog("about:blank","","dialogWidth:1px;dialogheight:1px"),n.commit("setDialogVisible",!0),n.commit("fnAdd");return}if(window.event.altkey&&window.event.keyCode===27){n.commit("setDialogVisible",!0),n.commit("fnAdd");return}},g=()=>{new Date().toLocaleTimeString()},C=()=>{n.commit("fnAdd"),n.commit("setDialogVisible",!0),clearInterval(a.setTimer)},A=()=>{a.setTimer=setTimeout(()=>{g()},1)},M=()=>{n.state.count>=3?(j({id:n.state.answerGetData[0].id,person:a.personInfo,answer:n.state.examQue}),d.push("/submitPage")):n.commit("setDialogVisible",!1),console.log("\u786E\u5B9A")},R=()=>{let e=a.difference-new Date,l=Math.floor(e/1e3/3600%24),f=Math.floor(e/1e3/60%60),S=Math.floor(e/1e3%60);e>=0?(e=e-1,a.hour=l,a.min=f,a.sec=S):(F(),a.timer=null,clearTimeout(a.timer)),a.timer=setInterval(()=>{let k=a.difference-new Date,I=Math.floor(k/1e3/3600%24),$=Math.floor(k/1e3/60%60),B=Math.floor(k/1e3%60);k>=0?(k=k-1,a.hour=I,a.min=$,a.sec=B):(F(),a.timer=null,clearTimeout(a.timer)),console.log("111")},1e3)};return(e,l)=>{const f=x("el-button"),S=x("el-divider"),k=x("el-dialog");return r(),c("div",{class:"all",ref_key:"all",ref:_},[s("div",fe,[s("div",_e,[s("div",null,[s("p",null,"\u540D\u5B57\uFF1A"+u(o(a).personInfo.name),1),s("p",null,"\u9636\u6BB5\uFF1A"+u(o(a).personInfo.subject),1)]),s("div",null,[s("p",null,"\u8054\u7CFB\u65B9\u5F0F\uFF1A"+u(o(a).personInfo.phone),1),s("p",pe,[ge,s("span",null,u(o(a).hour)+":"+u(o(a).min)+":"+u(o(a).sec),1)])]),s("div",null,[s("p",null,"\u603B\u5206\uFF1A"+u(o(a).overallResult)+"\u5206",1)])]),s("p",we,[w(f,{type:"primary",onClick:F},{default:b(()=>[he]),_:1})])]),s("div",ye,[s("div",ve,[s("div",be,[s("p",{style:{"text-align":"right"}},[s("img",{width:"28",onClick:p,src:H,alt:""})]),s("p",xe,u(o(n).state.answerGetData[0].exam_name)+"\u9636\u6BB5\u8003\u8BD5 ",1),s("p",De," \u8003\u8BD5\u9636\u6BB5\uFF1A"+u(o(n).state.answerGetData[0].exam_name),1),s("p",ke," \u76F8\u5173\u5185\u5BB9\uFF1A"+u(o(n).state.answerGetData[0].stage)+"\u76F8\u5173\u77E5\u8BC6 ",1),s("p",null," \u6B64\u6B21\u8003\u8BD5\u4E3A"+u(o(n).state.answerGetData[0].exam_name)+"\u9636\u6BB5\u6D4B\u8BD5\uFF0C\u8BF7\u8BA4\u771F\u4F5C\u7B54\u3002 ",1)]),s("div",null,[w(S)]),s("div",null,[(r(!0),c(V,null,E(o(n).state.examQue,(I,$)=>(r(),O(me,{onGetData:z,key:$,nameData:I,dataIndex:$},null,8,["nameData","dataIndex"]))),128))])])]),w(k,{modelValue:o(n).state.dialogVisible,"onUpdate:modelValue":l[0]||(l[0]=I=>o(n).state.dialogVisible=I),"close-on-click-modal":!1,title:"\u6E29\u99A8\u63D0\u793A\uFF1A",modal:"false",top:"286px",width:"30%"},{footer:b(()=>[s("span",qe,[w(f,{type:"primary",onClick:M},{default:b(()=>[Fe]),_:1})])]),default:b(()=>[s("span",null,"\u7B2C"+u(o(n).state.count)+"\u6B21\u5207\u5C4F\uFF0C\u6700\u591A\u5207\u5C4F\u4E09\u6B21\uFF0C\u5982\u679C\u8D85\u8FC7\u4E09\u6B21\u5C06\u81EA\u52A8\u63D0\u4EA4\u60A8\u7684\u7B54\u5377\uFF0C\u8BF7\u8BA4\u771F\u7B54\u9898\uFF01",1)]),_:1},8,["modelValue"])],512)}}};var Ce=T(Se,[["__scopeId","data-v-0d848061"]]);export{Ce as default};
